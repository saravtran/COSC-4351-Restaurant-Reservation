function cov_2f7yvyu7f0(){var path="C:\\Users\\phanv\\OneDrive\\Desktop\\GitHub\\COSC-4351-Restaurant-Reservation\\server\\passportConfig.js";var hash="9e21beb0becc6f45356dfdc2a4dfc241f465401c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\phanv\\OneDrive\\Desktop\\GitHub\\COSC-4351-Restaurant-Reservation\\server\\passportConfig.js",statementMap:{"0":{start:{line:1,column:22},end:{line:1,column:56}},"1":{start:{line:2,column:13},end:{line:2,column:28}},"2":{start:{line:3,column:15},end:{line:3,column:34}},"3":{start:{line:6,column:4},end:{line:6,column:31}},"4":{start:{line:8,column:29},end:{line:40,column:5}},"5":{start:{line:9,column:6},end:{line:9,column:32}},"6":{start:{line:10,column:6},end:{line:39,column:8}},"7":{start:{line:14,column:10},end:{line:16,column:11}},"8":{start:{line:15,column:12},end:{line:15,column:22}},"9":{start:{line:17,column:10},end:{line:17,column:36}},"10":{start:{line:19,column:10},end:{line:37,column:11}},"11":{start:{line:20,column:25},end:{line:20,column:40}},"12":{start:{line:22,column:12},end:{line:32,column:15}},"13":{start:{line:23,column:14},end:{line:25,column:15}},"14":{start:{line:24,column:16},end:{line:24,column:33}},"15":{start:{line:26,column:14},end:{line:31,column:15}},"16":{start:{line:27,column:16},end:{line:27,column:49}},"17":{start:{line:30,column:16},end:{line:30,column:88}},"18":{start:{line:36,column:12},end:{line:36,column:79}},"19":{start:{line:42,column:4},end:{line:47,column:6}},"20":{start:{line:49,column:4},end:{line:49,column:87}},"21":{start:{line:49,column:52},end:{line:49,column:85}},"22":{start:{line:51,column:4},end:{line:59,column:7}},"23":{start:{line:52,column:6},end:{line:58,column:9}},"24":{start:{line:53,column:8},end:{line:55,column:9}},"25":{start:{line:54,column:10},end:{line:54,column:36}},"26":{start:{line:56,column:8},end:{line:56,column:61}},"27":{start:{line:57,column:8},end:{line:57,column:52}},"28":{start:{line:62,column:0},end:{line:62,column:28}}},fnMap:{"0":{name:"initialize",decl:{start:{line:5,column:9},end:{line:5,column:19}},loc:{start:{line:5,column:30},end:{line:60,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:29},end:{line:8,column:30}},loc:{start:{line:8,column:62},end:{line:40,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:13,column:8},end:{line:13,column:9}},loc:{start:{line:13,column:26},end:{line:38,column:9}},line:13},"3":{name:"(anonymous_3)",decl:{start:{line:22,column:52},end:{line:22,column:53}},loc:{start:{line:22,column:70},end:{line:32,column:13}},line:22},"4":{name:"(anonymous_4)",decl:{start:{line:49,column:27},end:{line:49,column:28}},loc:{start:{line:49,column:52},end:{line:49,column:85}},line:49},"5":{name:"(anonymous_5)",decl:{start:{line:51,column:29},end:{line:51,column:30}},loc:{start:{line:51,column:52},end:{line:59,column:5}},line:51},"6":{name:"(anonymous_6)",decl:{start:{line:52,column:65},end:{line:52,column:66}},loc:{start:{line:52,column:83},end:{line:58,column:7}},line:52}},branchMap:{"0":{loc:{start:{line:14,column:10},end:{line:16,column:11}},type:"if",locations:[{start:{line:14,column:10},end:{line:16,column:11}},{start:{line:14,column:10},end:{line:16,column:11}}],line:14},"1":{loc:{start:{line:19,column:10},end:{line:37,column:11}},type:"if",locations:[{start:{line:19,column:10},end:{line:37,column:11}},{start:{line:19,column:10},end:{line:37,column:11}}],line:19},"2":{loc:{start:{line:23,column:14},end:{line:25,column:15}},type:"if",locations:[{start:{line:23,column:14},end:{line:25,column:15}},{start:{line:23,column:14},end:{line:25,column:15}}],line:23},"3":{loc:{start:{line:26,column:14},end:{line:31,column:15}},type:"if",locations:[{start:{line:26,column:14},end:{line:31,column:15}},{start:{line:26,column:14},end:{line:31,column:15}}],line:26},"4":{loc:{start:{line:53,column:8},end:{line:55,column:9}},type:"if",locations:[{start:{line:53,column:8},end:{line:55,column:9}},{start:{line:53,column:8},end:{line:55,column:9}}],line:53}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9e21beb0becc6f45356dfdc2a4dfc241f465401c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2f7yvyu7f0=function(){return actualCoverage;};}return actualCoverage;}cov_2f7yvyu7f0();const LocalStrategy=(cov_2f7yvyu7f0().s[0]++,require("passport-local").Strategy);const pool=(cov_2f7yvyu7f0().s[1]++,require("./db"));const bcrypt=(cov_2f7yvyu7f0().s[2]++,require("bcryptjs"));function initialize(passport){cov_2f7yvyu7f0().f[0]++;cov_2f7yvyu7f0().s[3]++;console.log("Initialized");cov_2f7yvyu7f0().s[4]++;const authenticateUser=(id,password,authenticated)=>{cov_2f7yvyu7f0().f[1]++;cov_2f7yvyu7f0().s[5]++;console.log(id,password);cov_2f7yvyu7f0().s[6]++;pool.query(`SELECT * FROM users WHERE username = $1`,[id],(err,results)=>{cov_2f7yvyu7f0().f[2]++;cov_2f7yvyu7f0().s[7]++;if(err){cov_2f7yvyu7f0().b[0][0]++;cov_2f7yvyu7f0().s[8]++;throw err;}else{cov_2f7yvyu7f0().b[0][1]++;}cov_2f7yvyu7f0().s[9]++;console.log(results.rows);cov_2f7yvyu7f0().s[10]++;if(results.rows.length>0){cov_2f7yvyu7f0().b[1][0]++;const user=(cov_2f7yvyu7f0().s[11]++,results.rows[0]);cov_2f7yvyu7f0().s[12]++;bcrypt.compare(password,user.password,(err,isMatch)=>{cov_2f7yvyu7f0().f[3]++;cov_2f7yvyu7f0().s[13]++;if(err){cov_2f7yvyu7f0().b[2][0]++;cov_2f7yvyu7f0().s[14]++;console.log(err);}else{cov_2f7yvyu7f0().b[2][1]++;}cov_2f7yvyu7f0().s[15]++;if(isMatch){cov_2f7yvyu7f0().b[3][0]++;cov_2f7yvyu7f0().s[16]++;return authenticated(null,user);}else{cov_2f7yvyu7f0().b[3][1]++;cov_2f7yvyu7f0().s[17]++;//password is incorrect
return authenticated(null,false,{message:"Password is incorrect"});}});}else{cov_2f7yvyu7f0().b[1][1]++;cov_2f7yvyu7f0().s[18]++;// No user
return authenticated(null,false,{message:"Username not found"});}});};cov_2f7yvyu7f0().s[19]++;passport.use(new LocalStrategy({usernameField:"username",passwordField:"your_pass"},authenticateUser));cov_2f7yvyu7f0().s[20]++;passport.serializeUser((user,authenticated)=>{cov_2f7yvyu7f0().f[4]++;cov_2f7yvyu7f0().s[21]++;return authenticated(null,user.user_id);});cov_2f7yvyu7f0().s[22]++;passport.deserializeUser((id,authenticated)=>{cov_2f7yvyu7f0().f[5]++;cov_2f7yvyu7f0().s[23]++;pool.query(`SELECT * FROM users WHERE user_id = $1`,[id],(err,results)=>{cov_2f7yvyu7f0().f[6]++;cov_2f7yvyu7f0().s[24]++;if(err){cov_2f7yvyu7f0().b[4][0]++;cov_2f7yvyu7f0().s[25]++;return authenticated(err);}else{cov_2f7yvyu7f0().b[4][1]++;}cov_2f7yvyu7f0().s[26]++;console.log(`user ID is ${results.rows[0].user_id}`);cov_2f7yvyu7f0().s[27]++;return authenticated(null,results.rows[0]);});});}cov_2f7yvyu7f0().s[28]++;module.exports=initialize;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0Q29uZmlnLmpzIl0sIm5hbWVzIjpbIkxvY2FsU3RyYXRlZ3kiLCJyZXF1aXJlIiwiU3RyYXRlZ3kiLCJwb29sIiwiYmNyeXB0IiwiaW5pdGlhbGl6ZSIsInBhc3Nwb3J0IiwiY29uc29sZSIsImxvZyIsImF1dGhlbnRpY2F0ZVVzZXIiLCJpZCIsInBhc3N3b3JkIiwiYXV0aGVudGljYXRlZCIsInF1ZXJ5IiwiZXJyIiwicmVzdWx0cyIsInJvd3MiLCJsZW5ndGgiLCJ1c2VyIiwiY29tcGFyZSIsImlzTWF0Y2giLCJtZXNzYWdlIiwidXNlIiwidXNlcm5hbWVGaWVsZCIsInBhc3N3b3JkRmllbGQiLCJzZXJpYWxpemVVc2VyIiwidXNlcl9pZCIsImRlc2VyaWFsaXplVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI2K0lBZVk7MkZBZlosS0FBTUEsQ0FBQUEsYUFBYSwwQkFBR0MsT0FBTyxDQUFDLGdCQUFELENBQVAsQ0FBMEJDLFFBQTdCLENBQW5CLENBQ0EsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBR0YsT0FBTyxDQUFDLE1BQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUcsQ0FBQUEsTUFBTSwwQkFBR0gsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFaLENBRUEsUUFBU0ksQ0FBQUEsVUFBVCxDQUFvQkMsUUFBcEIsQ0FBOEIsaURBQzFCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxhQUFaLEVBRDBCLHdCQUcxQixLQUFNQyxDQUFBQSxnQkFBZ0IsQ0FBRyxDQUFDQyxFQUFELENBQUtDLFFBQUwsQ0FBZUMsYUFBZixHQUFpQyxpREFDeERMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxFQUFaLENBQWdCQyxRQUFoQixFQUR3RCx3QkFFeERSLElBQUksQ0FBQ1UsS0FBTCxDQUNHLHlDQURILENBRUUsQ0FBQ0gsRUFBRCxDQUZGLENBR0UsQ0FBQ0ksR0FBRCxDQUFNQyxPQUFOLEdBQWtCLGlEQUNoQixHQUFJRCxHQUFKLENBQVMsb0RBQ1AsS0FBTUEsQ0FBQUEsR0FBTixDQUNELENBRkQsaUNBRGdCLHdCQUloQlAsT0FBTyxDQUFDQyxHQUFSLENBQVlPLE9BQU8sQ0FBQ0MsSUFBcEIsRUFKZ0IseUJBTWhCLEdBQUlELE9BQU8sQ0FBQ0MsSUFBUixDQUFhQyxNQUFiLENBQXNCLENBQTFCLENBQTZCLDRCQUMzQixLQUFNQyxDQUFBQSxJQUFJLDJCQUFHSCxPQUFPLENBQUNDLElBQVIsQ0FBYSxDQUFiLENBQUgsQ0FBVixDQUQyQix5QkFHM0JaLE1BQU0sQ0FBQ2UsT0FBUCxDQUFlUixRQUFmLENBQXlCTyxJQUFJLENBQUNQLFFBQTlCLENBQXdDLENBQUNHLEdBQUQsQ0FBTU0sT0FBTixHQUFrQixrREFDeEQsR0FBSU4sR0FBSixDQUFTLHFEQUNQUCxPQUFPLENBQUNDLEdBQVIsQ0FBWU0sR0FBWixFQUNELENBRkQsaUNBRHdELHlCQUl4RCxHQUFJTSxPQUFKLENBQWEscURBQ1gsTUFBT1IsQ0FBQUEsYUFBYSxDQUFDLElBQUQsQ0FBT00sSUFBUCxDQUFwQixDQUNELENBRkQsSUFFTyxxREFDTDtBQUNBLE1BQU9OLENBQUFBLGFBQWEsQ0FBQyxJQUFELENBQU8sS0FBUCxDQUFjLENBQUVTLE9BQU8sQ0FBRSx1QkFBWCxDQUFkLENBQXBCLENBQ0QsQ0FDRixDQVZELEVBV0QsQ0FkRCxJQWVLLHFEQUNIO0FBQ0EsTUFBT1QsQ0FBQUEsYUFBYSxDQUFDLElBQUQsQ0FBTyxLQUFQLENBQWMsQ0FBQ1MsT0FBTyxDQUFFLG9CQUFWLENBQWQsQ0FBcEIsQ0FDRCxDQUNGLENBNUJILEVBOEJELENBaENELENBSDBCLHlCQXFDMUJmLFFBQVEsQ0FBQ2dCLEdBQVQsQ0FDRSxHQUFJdEIsQ0FBQUEsYUFBSixDQUNFLENBQUN1QixhQUFhLENBQUUsVUFBaEIsQ0FBNEJDLGFBQWEsQ0FBRSxXQUEzQyxDQURGLENBRUVmLGdCQUZGLENBREYsRUFyQzBCLHlCQTRDMUJILFFBQVEsQ0FBQ21CLGFBQVQsQ0FBdUIsQ0FBQ1AsSUFBRCxDQUFPTixhQUFQLEdBQXlCLHdEQUFBQSxDQUFBQSxhQUFhLENBQUMsSUFBRCxDQUFPTSxJQUFJLENBQUNRLE9BQVosQ0FBYixDQUFpQyxDQUFqRixFQTVDMEIseUJBOEMxQnBCLFFBQVEsQ0FBQ3FCLGVBQVQsQ0FBeUIsQ0FBQ2pCLEVBQUQsQ0FBS0UsYUFBTCxHQUF1QixrREFDOUNULElBQUksQ0FBQ1UsS0FBTCxDQUFZLHdDQUFaLENBQXFELENBQUNILEVBQUQsQ0FBckQsQ0FBMkQsQ0FBQ0ksR0FBRCxDQUFNQyxPQUFOLEdBQWtCLGtEQUMzRSxHQUFJRCxHQUFKLENBQVMscURBQ1AsTUFBT0YsQ0FBQUEsYUFBYSxDQUFDRSxHQUFELENBQXBCLENBQ0QsQ0FGRCxpQ0FEMkUseUJBSTNFUCxPQUFPLENBQUNDLEdBQVIsQ0FBYSxjQUFhTyxPQUFPLENBQUNDLElBQVIsQ0FBYSxDQUFiLEVBQWdCVSxPQUFRLEVBQWxELEVBSjJFLHlCQUszRSxNQUFPZCxDQUFBQSxhQUFhLENBQUMsSUFBRCxDQUFPRyxPQUFPLENBQUNDLElBQVIsQ0FBYSxDQUFiLENBQVAsQ0FBcEIsQ0FDRCxDQU5ELEVBT0QsQ0FSRCxFQVNILEMseUJBRURZLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQnhCLFVBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTG9jYWxTdHJhdGVneSA9IHJlcXVpcmUoXCJwYXNzcG9ydC1sb2NhbFwiKS5TdHJhdGVneTtcclxuY29uc3QgcG9vbCA9IHJlcXVpcmUoXCIuL2RiXCIpO1xyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0anNcIik7XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplKHBhc3Nwb3J0KSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemVkXCIpO1xyXG5cclxuICAgIGNvbnN0IGF1dGhlbnRpY2F0ZVVzZXIgPSAoaWQsIHBhc3N3b3JkLCBhdXRoZW50aWNhdGVkKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGlkLCBwYXNzd29yZCk7XHJcbiAgICAgIHBvb2wucXVlcnkoXHJcbiAgICAgICAgYFNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSAkMWAsXHJcbiAgICAgICAgW2lkXSxcclxuICAgICAgICAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMucm93cyk7XHJcbiAgXHJcbiAgICAgICAgICBpZiAocmVzdWx0cy5yb3dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IHJlc3VsdHMucm93c1swXTtcclxuICBcclxuICAgICAgICAgICAgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQsIChlcnIsIGlzTWF0Y2gpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoaXNNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0ZWQobnVsbCwgdXNlcik7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vcGFzc3dvcmQgaXMgaW5jb3JyZWN0XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlZChudWxsLCBmYWxzZSwgeyBtZXNzYWdlOiBcIlBhc3N3b3JkIGlzIGluY29ycmVjdFwiIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IFxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE5vIHVzZXJcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0ZWQobnVsbCwgZmFsc2UsIHttZXNzYWdlOiBcIlVzZXJuYW1lIG5vdCBmb3VuZFwifSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfTtcclxuICBcclxuICAgIHBhc3Nwb3J0LnVzZShcclxuICAgICAgbmV3IExvY2FsU3RyYXRlZ3koXHJcbiAgICAgICAge3VzZXJuYW1lRmllbGQ6IFwidXNlcm5hbWVcIiwgcGFzc3dvcmRGaWVsZDogXCJ5b3VyX3Bhc3NcIn0sXHJcbiAgICAgICAgYXV0aGVudGljYXRlVXNlclxyXG4gICAgICApXHJcbiAgICApO1xyXG5cclxuICAgIHBhc3Nwb3J0LnNlcmlhbGl6ZVVzZXIoKHVzZXIsIGF1dGhlbnRpY2F0ZWQpID0+IGF1dGhlbnRpY2F0ZWQobnVsbCwgdXNlci51c2VyX2lkKSk7XHJcbiAgXHJcbiAgICBwYXNzcG9ydC5kZXNlcmlhbGl6ZVVzZXIoKGlkLCBhdXRoZW50aWNhdGVkKSA9PiB7XHJcbiAgICAgIHBvb2wucXVlcnkoYFNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcl9pZCA9ICQxYCwgW2lkXSwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdGVkKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGB1c2VyIElEIGlzICR7cmVzdWx0cy5yb3dzWzBdLnVzZXJfaWR9YCk7XHJcbiAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0ZWQobnVsbCwgcmVzdWx0cy5yb3dzWzBdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4gIFxyXG5tb2R1bGUuZXhwb3J0cyA9IGluaXRpYWxpemU7Il19